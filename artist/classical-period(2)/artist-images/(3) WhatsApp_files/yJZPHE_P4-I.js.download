;/*FB_PKG_DELIM*/

__d("toSentenceCase",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return"";var t=e.split(" "),n=""+t[0].charAt(0).toUpperCase()+t[0].substring(1).toLowerCase();return t.length===1?n:n.concat(" ",t.slice(1).map(function(e){return e.toLowerCase()}).join(" "))}i.default=e}),66);
__d("WAWebCreateBugnubTaskUrl",["WAWebBuildConstants","WAWebBuildType","WAWebConnModel","WAWebEnvironment","WAWebLid1X1MigrationGating","WAWebMobilePlatforms","WAWebUA","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","cr:9565","toSentenceCase"],(function(t,n,r,o,a,i,l){var e,s=(e=n("cr:9565"))!=null?e:{},u=s.getWindowsBuildType;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=o("WAWebUserPrefsMeUser").getMaybeMePnUser())==null?void 0:t.user,a="Web";r("WAWebEnvironment").isWindows&&(a="Windows Hybrid");var i;u&&(i=r("toSentenceCase")(o("WAWebBuildType").BuildType.getName(u())));var l=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb(),s={first_question:"New Devices (CEP)",newdevices:a,version:""+o("WAWebBuildConstants").VERSION_STR+(l?" (joined beta)":""),wabuildtype:i,bug:m("",e),logs:"I understand and give consent",number:n!=null?n:""},c=encodeURIComponent(JSON.stringify(s));return"https://www.internalfb.com/butterfly/form/777724432837431?default_responses="+c}),d.apply(this,arguments)}function m(e,t){var n,a=(n=o("WAWebUserPrefsMeUser").getMaybeMePnUser())==null?void 0:n.user,i=null;switch(o("WAWebConnModel").Conn.platform){case o("WAWebMobilePlatforms").PLATFORMS.ANDROID:i="Android";break;case o("WAWebMobilePlatforms").PLATFORMS.IPHONE:i="iPhone";break;case o("WAWebMobilePlatforms").PLATFORMS.SMBA:i="SMB - Android";break;case o("WAWebMobilePlatforms").PLATFORMS.SMBI:i="SMB - iPhone";break;default:i="Choose an option"}var l="";if(r("WAWebEnvironment").isWeb)switch(o("WAWebUA").UA.browser){case o("WAWebUA").BROWSER_TYPE.CHROME:l="Chrome";break;case o("WAWebUA").BROWSER_TYPE.SAFARI:l="Safari";break;case o("WAWebUA").BROWSER_TYPE.FIREFOX:l="Firefox";break;case o("WAWebUA").BROWSER_TYPE.EDGE:l="Microsoft Edge";break;case o("WAWebUA").BROWSER_TYPE.OPERA:l="Opera"}var s=o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated(),c=["Description: "+e+"\n","Link to crash logs",a!=null?"https://www.internalfb.com/intern/bunny/?q=waflb+"+a:"https://www.internalfb.com/whatsapp/reliability/lookup_logs?search_query","time of log: "+new Date().toString()+"\n","Primary Platform: "+i];return l!==""&&c.push("Browser: "+l),t!=null&&c.push("Error string:",""+t),u&&(c.push("Windows Hybrid native version: "+o("WAWebBuildConstants").VERSION_STR),c.push("Windows Hybrid native build type: "+o("WAWebBuildType").BuildType.getName(u()))),c.push("\nIs LID Migrated: "+(s?"Yes":"No")),c.join("\n")}l.createBugnubTaskUrl=c,l.enrichBugReportDescription=m}),98);
__d("WAWebOpenBugReportForm",["WAWebCrashlog","WAWebCreateBugnubTaskUrl","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WAWebCrashlog").upload({reason:"Manual task creation",immediate:!0,isHighPri:!0}),window.open(yield o("WAWebCreateBugnubTaskUrl").createBugnubTaskUrl(e))}),s.apply(this,arguments)}l.openBugReportForm=e}),98);
__d("WAWebToastManagerImpl",["WAHash","WAWebCmd","WAWebCopyToClipboard","WAWebL10N","WAWebNoop","WAWebOpenBugReportForm","WAWebSetRefCache","WAWebToast.react","WAWebToastManager","WAWebVelocityTransitionGroup","WDSToast.react","asyncToGeneratorRuntime","lodash","react","stylex","uniqueID","useLazyRef","useWAWebABPropConfigValue","useWAWebListener","useWAWebOnUnmount","useWAWebPrevious"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.cloneElement,p=c.useEffect,_=c.useRef,f=c.useState,g={slide0:{transform:"xnn1q72",$$css:!0},slide1:{transform:"xvav9fi",$$css:!0},slide2:{transform:"x8r675y",$$css:!0},slide3:{opacity:"xg01cxk",transform:"x1o6clbr",$$css:!0},wrapper:{opacity:"x1hc1fzr",bottom:"x1ey2m1c",lineHeight:"xzl6hoh",marginTop:"x98l61r",marginInlineEnd:"xviac27",marginBottom:"x1ua1l7f",marginInlineStart:"xlese2p",minHeight:"xjwf9q1",position:"x10l6tqk",zIndex:"xc9l9hb",transition:"x1alf9jy",$$css:!0},center:{insetInlineStart:"xbudbmw",left:null,right:null,marginInlineStart:"x1lziwak",marginInlineEnd:"x14z9mp",maxWidth:"x65f84u",$$css:!0},transformLeft:{transform:"xuuh30",$$css:!0},transformRight:{transform:"xitnhlw",$$css:!0},right:{insetInlineEnd:"xtijo5x",left:null,right:null,$$css:!0}},h=3,y=5*1e3;function C(){var e=r("useLazyRef")(function(){return new Map}),t=function(n,r){r?e.current.set(n,r):e.current.delete(n)},a=o("useWAWebABPropConfigValue").useABPropConfigValue("wds_web_toast"),i=o("WDSToast.react").useWDSToast(),l=i.showToast,u=r("useLazyRef")(function(){return new(r("WAWebSetRefCache"))(t)}),c=_(!1),C=f({}),b=C[0],v=C[1],L=r("useWAWebPrevious")(b);function E(e,t){var n=e.id,r=e.duration,i=e.msg,s=e.action,u=e.visibile;if(a===!1||u===!1||r!=null&&r!==4e3||t!=null&&t!==o("WAWebToastManager").ToastPosition.LEFT)return!1;var c=Array.isArray(s)?s[0]:s;return(c==null?void 0:c.onAction)!=null?l({type:"default",message:i,action:{label:c.actionText,onPress:function(){c.onAction()}}}):l({type:"default",message:i}),!0}function k(e,t){var n=e.id,i=e.initialAction,s=e.onDismiss,u=e.pendingAction,c=e.settleDuration,d=e.toastPosition;if(a===!1||c!=null&&c!==5e3||d!=null&&d!=="LEFT"||t!=null&&t!==o("WAWebToastManager").ToastPosition.LEFT)return!1;if(i){var m=i.action,p=i.handler,_=i.text;m!=null&&p!=null?l({type:"loading",message:function(){return _},action:function(){return{label:m,onPress:function(){return void p()}}},process:u}):l({type:"loading",message:function(){return _},process:u})}return u.then(function(e){e&&(e.action!=null&&e.handler!=null?l({type:"default",message:e.text,action:{label:e.action,onPress:function(){return void(e.handler==null?void 0:e.handler())}}}):l({type:"default",message:e.text}))}).catch(r("WAWebNoop")),!0}var I=function(n,r){var t,o=!1,a=n.props;if("pendingAction"in a?o=k(a,r):o=E(a,r),!o){var i=(t=a.id)!=null?t:R(),l=e.current.get(i);l?l.restartDelay==null||l.restartDelay():v(function(e){var t;return babelHelpers.extends({},e,(t={},t[i]={toast:n,position:r,id:i},t))})}},T=function(t){b[t]&&v(function(e){return r("lodash").omit(e,t)})};o("useWAWebListener").useListener(o("WAWebToastManager").ToastManager,"open_toast",I),o("useWAWebListener").useListener(o("WAWebToastManager").ToastManager,"close_toast",T);var D=null,x=r("useLazyRef")(function(){return new Map});r("useWAWebOnUnmount")(function(){x.current.forEach(function(e){return self.clearTimeout(e)})}),o("useWAWebListener").useListener(D,"window_error",function(e){var t=e.replace("[ErrorPubSub] ",""),a=r("WAHash")(t);if(!x.current.has(a)){var i=self.setTimeout(function(){x.current.delete(a)},y);x.current.set(a,i),I(d.jsx(o("WAWebToast.react").Toast,{msg:S(t),action:[{actionText:"Copy",onAction:function(){o("WAWebCopyToClipboard").copyTextToClipboard(t)}},{actionText:"Report",onAction:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebOpenBugReportForm").openBugReportForm(t)});function r(){return e.apply(this,arguments)}return r})()}]}))}}),p(function(){c.current=Object.keys(L!=null?L:{}).length>Object.keys(b).length},[b,L]);var $=c.current,P=r("lodash").sortBy(b,["toast","id"]).reverse().map(function(e,t){var n=e.toast,a=e.position,i=e.id;return d.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(g.wrapper,a===o("WAWebToastManager").ToastPosition.CENTER&&g.center,a===o("WAWebToastManager").ToastPosition.RIGHT&&g.right,t===0&&$&&g.slide0,t===1&&g.slide1,t===2&&g.slide2,t>=h&&g.slide3),{children:d.jsx("div",babelHelpers.extends({},s.props(a===o("WAWebToastManager").ToastPosition.CENTER&&(r("WAWebL10N").isRTL()?g.transformRight:g.transformLeft)),{children:m(n,{ref:u.current.getRefSetter(i),id:i})}))}),i)});return d.jsx(r("WAWebVelocityTransitionGroup"),{transitionName:"fade_sifo",children:P})}C.displayName=C.name+" [from "+i.id+"]";var b="\uD83D\uDED1",v=200;function S(e){var t=e.length>v?e.slice(0,v)+"...":e;return b+" "+t}function R(e){return r("uniqueID")(e||"toast")}l.default=C}),98);